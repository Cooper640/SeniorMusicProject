package jmusicpackage;

import java.io.*;
import java.util.*;

public class BatchTester {

	public static void test(File[] files, String correctArtist){
		File totals = new File("batchResults.txt");
		int hitCounter = 0;
		for(int i = 0; i < files.length; i++){
			WholeSongAnalysisBigram.analisisMethod2(files[i].getAbsolutePath());
			File results = new File("results.txt");
			try{
				if(results.exists()){
					Scanner fileScanner = new Scanner(results);
					int artist1 = fileScanner.nextInt();
					int artist2 = fileScanner.nextInt();
					int artist3 = fileScanner.nextInt();
					int artist4 = fileScanner.nextInt();
					fileScanner.close();
					results.delete();

					BufferedWriter writer = new BufferedWriter(new FileWriter(totals, true));
					if(artist1>artist2 && artist1>artist3 && artist1>artist4){
						if(correctArtist == "Bach") hitCounter++;
						writer.write(files[i].getPath()+": Bach\n");
					}
					else if(artist2>artist1 && artist2>artist3 && artist2>artist4){
						if(correctArtist == "Chopin") hitCounter++;
						writer.write(files[i].getPath()+": Chopin\n");
					}
					else if(artist3>artist1 && artist3>artist2 && artist3>artist4){
						if(correctArtist == "") hitCounter++;
						writer.write(files[i].getPath()+": \n");
					}
					else if(artist4>artist1 && artist4>artist2 && artist4>artist3){
						if(correctArtist == "") hitCounter++;
						writer.write(files[i].getPath()+": \n");
					}
					else writer.write(files[i].getPath()+": Tie Occured\n");

					if(i == files.length-1) writer.write("Hit/Miss rate: "+hitCounter+"/"+files.length);
					writer.close();
				}
			}
			catch(FileNotFoundException e){}
	        catch(IOException e){}
		}
	}

}
